- name: Check if Java has not been already installed
  stat: path=/opt/jdk-8u5-linux-x64.tar.gz
  register: java
  
- name: Download JDK8u5 to tmp
  command: 'wget --no-check-certificate --no-cookies --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u5-b13/jdk-8u5-linux-x64.tar.gz -P /opt'
  when: "java.stat.isdir is not defined"

- name: Untar JDK8
  command: 'tar xzf /opt/jdk-8u5-linux-x64.tar.gz'
  when: "java.stat.isdir is defined"

- name: Create JAVA_HOME variable
  command: 'EXPORT JAVA_HOME=/opt/jdk1.8.0_05'
  
- name: Append JAVA_HOME to path
  command: 'EXPORT PATH=$PATH:$JAVA_HOME/bin'
